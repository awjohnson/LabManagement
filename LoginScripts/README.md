
- **login.sh**: The first step in the script is to always ensure that the folder /Users/Shared/login has the proper permissions, ownership and visibility. Then it will remove the trigger file _/Users/Shared/login/trigger_. This script will then call the rest of the login scripts that need to run. Since Apple did away with Login and Logout Hooks, we now need to find a clever way to run scripts upon user login and user logout. This script is called by a LaunchDaemon: edu.stonybrook.sinc.runlogin.plist.
- **edu.stonybrook.sinc.runlogin.plist**: This Launch Daemon looks for activity in an invisible folder: /Users/Shared/login. Once a file has been added it will fire off the login.sh script. This is due to the fact that most login scripts need to run with root priviliges. This makes use of a binary called brightness. Latest information I found is located here: https://github.com/nriley/brightness/
- **sinc-iMacBrightness.pl**: This script will check to see if it's an iMac and brighten the screen up. We find that students sometimes leave the iMacs with the brightness turned down, and users might not know how to brighten the screen back up.
- **sinc-adminStuff.pl**: This script configures the local admin account. In our setups, our local admin is an invisible acount located in /var/.home. Since we disable profiles when the Administrator logs in, we need some other way to configure settings that we want to keep constant in the local admin acount across the entire managed fleed of computers.
- **sinc-permissions.pl**: This script will change some of the home directory permissions around. Since these computers are public lab computers, with potentially hundreds of users using them, we don't want user home directories created on the hard drive to be readable in any way by other users. We also try to do some basic Google update control (since it seems Google is ignoring our managed profile in regards to updates) and the AppleStoreUpdateAgent. None of these things will work right in a non-administrator account, and plus we want control over when updates get installed on the computers to so we can fully test, and create the least amount of disruption.
- **sinc-LoginTracker.sh**: Besides the use of KeyServer we also have our own internal user tracking system.
- **sinc-rmUser.pl**: This script will remove old home directories, cache files related to that user, and local LDAP information for the cached AD user. Admin, /Users/Shared, and a few other accounts are spared. It is called from a LaunchDaemon: _edu.stonybrook.sinc.rmuser.plist_.
- **edu.stonybrook.sinc.rmuser.plist**: LaunchDaemon to run rmUser.pl every morning at 8am, usually before the labs open up.
- **sinc-nightreboot.sh**: This script will reboot the lab computers very early in the morning. Should there be a user logged in, BigHonkingText (https://github.com/kitzy/bighonkingtext) is used to bring up a warning to the user at T-10, T-5 and T-1 before reboot occurs. It is called by the LaunchDaemon: _edu.stonybrook.sinc.nightreboot.plist_.
- **edu.stonybrook.sinc.nightreboot.plist**: LaunchDaemon to launch sinc-nightreboot.sh.
